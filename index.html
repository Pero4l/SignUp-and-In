<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign up/In</title>
    <style>
        body{
            padding-left: 30px;
        }
    </style>
</head>
<body>

    <div class="register"></div><br><br>

    <div id="submit"></div><br><br><br>

    <div class="login"></div>

    <footer>
        <a href=""></a>
    </footer>

    <script>
        let reg = document.querySelector('.register');
        let login = document.querySelector('.login')

        reg.innerHTML = ` 
            <h1>REGISTER</h1>
            <form>
                <div class="fullname">
                    <label>Fullname: </label>
                    <input type="text" placeholder="Enter your fullname">
                </div><br>

                <div class="birthday">
                    <label>Date of Birth: </label>
                    <input type="date">
                </div><br>

                <div class="email">
                    <label>Email: </label>
                    <input type="email" placeholder="Enter your email">
                </div><br>

                <div class="number">
                    <label>Phone No: </label>
                    <input type="tel" placeholder="Enter your phone number">
                </div><br>

                <div class="password">
                    <label>Password: </label>
                    <input type="password" placeholder="Enter your Password">
                </div><br>
        
                <input type="submit" value="Submit">
                <input type="reset" value="Clear">
            </form>`;

        login.innerHTML = `  
            <h1>LOGIN</h1>
            <form>
                <div class="email">
                    <label>Email: </label>
                    <input type="email" placeholder="Input your email"><br><br>
                </div>

                <div class="password">
                    <label>Password: </label>
                    <input type="password" placeholder="Enter your Password"> <br><br><br>
                </div>
                <button type="button" id="login-btn">Login</button>
            </form>`;

        const correctEmail = "test@example.com";
        const correctPassword = "password123";

        let loginBtn = document.querySelector('#login-btn');
        loginBtn.addEventListener('click', (e) => {
            e.preventDefault();

            let loginForm = document.querySelector('.login form');
            let email = loginForm.querySelector('input[type=email]').value;
            let password = loginForm.querySelector('input[type=password]').value;

            if (email === correctEmail && password === correctPassword) {
                alert("Login successful!");
            } else {
                alert("Invalid email or password");
            }
        });

        let bnt = document.querySelector('input[type=submit]');
        bnt.addEventListener('click', (e) => {
            e.preventDefault();

            let spans = document.querySelectorAll('span');
            if (spans.length > 0) {
                spans.forEach((span) => {
                    span.remove();
                });
            }

            let isValid = true;
            let registerForm = document.querySelector('.register form');
            let fullname = registerForm.querySelector('input[type=text]').value;
            let email = registerForm.querySelector('input[type=email]').value;
            let password = registerForm.querySelector('input[type=password]').value;
            let number = registerForm.querySelector('input[type=tel]').value;
            let birth = registerForm.querySelector('input[type=date]').value;

            if (!fullname || fullname == "") {
                isValid = false;
                let span = document.createElement('span');
                span.style.color = '#ff0000';
                span.innerText = 'Fullname cannot be empty';
                document.querySelector('.fullname').appendChild(span);
            }

            if (!number || number == "") {
                isValid = false;
                let span = document.createElement('span');
                span.style.color = '#ff0000';
                span.innerText = 'Phone No. cannot be empty';
                document.querySelector('.number').appendChild(span);
            }

            if (!birth || birth == "") {
                isValid = false;
                let span = document.createElement('span');
                span.style.color = '#ff0000';
                span.innerText = 'Date of Birth cannot be empty';
                document.querySelector('.birthday').appendChild(span);
            } else {
                let age = calculateAge(birth);
                if (age < 18) {
                    isValid = false;
                    let span = document.createElement('span');
                    span.style.color = '#ff0000';
                    span.innerText = 'User must be at least 18 years old';
                    document.querySelector('.birthday').appendChild(span);
                }
            }

            if (!email || email == "") {
                isValid = false;
                let span = document.createElement('span');
                span.style.color = '#ff0000';
                span.innerText = 'Email cannot be empty';
                document.querySelector('.email').appendChild(span);
            }

            if (!password || password == "") {
                isValid = false;
                let span = document.createElement('span');
                span.style.color = '#ff0000';
                span.innerText = 'Password cannot be empty';
                document.querySelector('.password').appendChild(span);
            } else {
                if (password.length < 8) {
                    isValid = false;
                    let span = document.createElement('span');
                    span.style.color = '#ff0000';
                    span.innerText = 'Password must be at least 8 characters';
                    document.querySelector('.password').appendChild(span);
                }
            }

            if (isValid) {
                document.getElementById('submit').innerHTML = `<h2>Submitted details</h2>
                    <ul><li>Name: ${fullname}</li><li>Date of birth: ${birth}</li><li>Email: ${email}</li><li>Phone No: ${number}</li><li>Password: ${password}</li></ul>`;
            } else {
                document.getElementById('submit').innerHTML = `<span style='color:#ff0000'>Please fill all fields correctly</span>`;
            }
        });

        function calculateAge(birthDate) {
            let birth = new Date(birthDate);
            let today = new Date();
            let age = today.getFullYear() - birth.getFullYear();
            let month = today.getMonth() - birth.getMonth();
            if (month < 0 || (month === 0 && today.getDate() < birth.getDate())) {
                age--;
            }
            return age;
        }
    </script>
</body>
</html>
